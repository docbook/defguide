<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" class="no-js"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script><title>Chapter 5. Customizing DocBook</title><link href="./css/pygments.css" rel="stylesheet"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link href="https://purl.org/dc/elements/1.1/" rel="schema.dc"/><meta name="dc.modified" content="2023-03-03T08:01:20Z"/><meta name="dc.created" content="2023-03-03"/><meta name="generator" content="DocBook xslTNG version 2.0.10 / c95fe4a / SAXON HE 11.5"/><link href="./css/docbook-toc.css" rel="stylesheet"/><link href="./css/docbook.css" rel="stylesheet" media="screen"/><link href="./css/docbook-paged.css" rel="stylesheet" media="print"/><link href="https://docbook.org/graphics/defguide-icon16.png" rel="icon" type="image/png"/><link href="css/defguide.css" rel="stylesheet"/><link href="css/pygments.css" rel="stylesheet"/><script src="https://kit.fontawesome.com/c94d537c36.js" type="text/javascript" crossorigin="anonymous"></script><link rel="prev" href="ch04.html"/><link rel="next" href="ch06.html"/><link rel="up" href="part1.html"/><link rel="home" href="index.html"/></head><body><nav class="top"><span class="nav"><a title="DocBook 5.2: The Definitive Guide" href="index.html"><i class="fas fa-home"></i></a> <a href="ch04.html" title="Chapter  4 .  Publishing DocBook Documents"><i class="fas fa-arrow-left"></i></a> <a title="Part  I .  Introduction" href="part1.html"><i class="fas fa-arrow-up"></i></a> <a title="Chapter  6 .  DocBook Assemblies" href="ch06.html"><i class="fas fa-arrow-right"></i></a></span><span class="text"><i class="title">DocBook 5.2: The Definitive Guide</i><span class="version">  (Version <a href="ch00-online.html">5.2.16 for DocBook 5.2CR5</a>)  </span></span></nav><main><div id="app-customizing" class="chapter component"><header><h1>Chapter <span class="label">5</span><span class="sep">. </span>Customizing DocBook</h1></header><p><span class="indexterm" id="idx.customize-1"></span><span class="indexterm" id="app-customizing_para1_indexterm2"></span><span class="indexterm" id="app-customizing_para1_indexterm3"></span><span class="indexterm" id="app-customizing_para1_indexterm4"></span>For some applications, DocBook <q>out of the box</q>
  may not be exactly what you need. Perhaps you need additional inline
  elements or perhaps you want to remove elements that you never want your
  authors to use. By design, DocBook makes this sort of customization
  easy.</p><p>It is even easier to customize DocBook 5.0 than it was to customize
  earlier releases. This is because DocBook 5.0 uses RELAX NG to express its
  schema. RELAX NG provides better support for modifications than
  <span class="acronym">DTD</span>s, and the DocBook schema takes full advantage of that
  support.</p><p>This chapter describes the organization of the RELAX NG schema for
  DocBook and how to make your own <span class="firstterm"><a href="dbgloss.html#gloss-customization-layer">customization
  layer</a></span>.<span class="indexterm" id="app-customizing_para3_indexterm1"></span> It contains methods and examples for adding, removing, and
  modifying elements and attributes, and conventions for naming and versioning
  DocBook customizations. It assumes some familiarity with RELAX NG. If you
  are unfamiliar with RELAX NG, you can find a tutorial introduction in the
  <i class="citetitle">RELAX NG Tutorial</i> <a href="appc.html#RNG-Intro" class="xref xref-bibliomixed"><span class="label"><span class="abbrev">RNG-Intro</span></span></a>.</p><p><span class="indexterm" id="app-customizing_para4_indexterm1"></span><span class="indexterm" id="app-customizing_para4_indexterm2"></span>You can use customization layers to extend DocBook or subset
  it. Creating a schema that is a strict subset of DocBook means that all of
  your instances are still completely valid DocBook instances, which may be
  important to your tools and stylesheets, and to other people with whom you
  share documents. An <span class="firstterm"><a href="dbgloss.html#gloss-extension">extension</a></span> adds new structures, or
  changes the schema in a way that is not compatible with DocBook. Extensions
  can be very useful, but might have a great impact on your
  environment.</p><p>Customization layers can be as small as restricting an attribute value
  or as large as adding an entirely different hierarchy on top of the inline
  elements.</p><section id="ch05-shouldi" class="section"><header><h2><span class="label">5<span class="sep">.</span>1</span><span class="sep">. </span>Should You Do This?</h2></header><p><span class="indexterm" id="ch05-shouldi_para1_indexterm1"></span>Changing a schema can have a wide-ranging impact on the
    tools and stylesheets that you use. It can have an impact on your authors
    and on your legacy documents. This is especially true if you make an
    extension. If you rely on your support staff to install and maintain your
    authoring and publishing tools, check with them before you invest a lot of
    time modifying the schema. There may be additional issues that are outside
    your immediate control. Proceed with caution.</p><p>That said, DocBook is designed to be easy to modify. This chapter
    assumes that you are comfortable with <span class="acronym">XML</span> and RELAX NG
    grammar syntax, but the examples presented should be a good springboard to
    learning the syntax if it’s not already familiar to you.</p></section><section id="s-notdocbook" class="section"><header><h2><span class="label">5<span class="sep">.</span>2</span><span class="sep">. </span>If You Change DocBook, It’s Not DocBook Anymore!</h2></header><p>The license agreement under which DocBook is distributed gives you
    complete freedom to change, modify, reuse, and generally hack the schema
    in any way you want, except that you must not call your alterations
    <q>DocBook.</q></p><section id="s-dbversion" class="section"><header><h3><span class="label">5<span class="sep">.</span>2<span class="sep">.</span>1</span><span class="sep">. </span>Namespace and Version</h3></header><p>Starting with DocBook <span class="acronym">V5.0</span>, DocBook is
      identified by its namespace,<span class="indexterm" id="s-dbversion_para1_indexterm1"></span><span class="indexterm" id="s-dbversion_para1_indexterm2"></span> <code class="uri">http://docbook.org/ns/docbook</code>. The particular
      version of DocBook to which an element conforms is identified by its
      <code class="tag tag-attribute">version</code> attribute. If the element
      does not specify a version, the version of the closest ancestor DocBook
      element that does specify a version is assumed. The <code class="tag tag-attribute">version</code> attribute is required on the root
      DocBook element.</p><p>Here is how these attributes would appear on the
      <a href="book.html"><code class="tag tag-element">book</code></a> element.<span class="indexterm" id="s-dbversion_para2_indexterm1"></span><span class="indexterm" id="s-dbversion_para2_indexterm2"></span></p><div id="ex.rootelement" class="informalexample informalobject"><div class="pre-wrap highlight" db-startinglinenumber="1" db-numberoflines="4"><pre class="language-xml numbered programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code><span class="nt">&lt;book</span> <span class="na">xmlns=</span><span class="s">"http://docbook.org/ns/docbook"</span></code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>      <span class="na">version=</span><span class="s">"5.0"</span><span class="nt">&gt;</span></code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>  …</code></span></span>
<span class="line" db-line="4"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code><span class="nt">&lt;/book&gt;</span></code></span></span>
</pre></div></div><p>If you change the DocBook schema, the namespace remains the same,
      but you must provide an alternate version identifier for the schema and
      the modules you changed. The <code class="tag tag-attribute">version</code> attribute identifies the version of
      DocBook the alternate is based on, specifies what type of variant it is,
      and names the variant and any additional modules. While the format for
      the version string is not part of the normative specification, the
      DocBook Technical Committee recommends the following format:<span class="indexterm" id="s-dbversion_para3_indexterm1"></span><span class="indexterm" id="s-dbversion_para3_indexterm2"></span></p><div class="pre-wrap"><pre class="screen verbatim verblines"><span class="line" db-line="1"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code><em class="replaceable">base_version</em>-(subset|extension|variant) (<em class="replaceable">name</em>[-<em class="replaceable">version</em>])+</code></span></span>
</pre></div><p>For example, version 1.0 of Acme Corporation’s extension of
      DocBook <span class="acronym">V5.0</span> could be identified as
      <q><code class="literal">5.0-extension acme-1.0</code></q>.</p><p>If your schema is a proper subset, use the
      <code class="literal">subset</code> keyword in the version. If your schema extends
      the markup model, use the <code class="literal">extension</code> keyword. If you’d
      rather not characterize your variant specifically as a subset or an
      extension, use the <code class="literal">variant</code> <span class="keep-together phrase">keyword</span>.</p></section><section id="pubid" class="section"><header><h3><span class="label">5<span class="sep">.</span>2<span class="sep">.</span>2</span><span class="sep">. </span>Public Identifiers</h3></header><p><span class="indexterm" id="pubid_para1_indexterm1"></span>Although not directly supported by RELAX NG, in some cases
      it may still be valuable to identify a DocBook <span class="acronym">V5.0</span>
      customization layer with a public identifier. A public identifier for
      DocBook <span class="acronym">V5.0</span> is:<span class="indexterm" id="pubid_para1_indexterm2"></span></p><div class="pre-wrap"><pre class="screen verbatim verblines"><span class="line" db-line="1"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>-//OASIS//DTD DocBook V5.0//EN</code></span></span>
</pre></div><p>If you make any changes to the structure of the schema, you must
      change the public identifier. You should change both the owner
      identifier and the description. Formal public identifiers for the base
      DocBook modules would have identifiers with the following syntax:</p><div class="pre-wrap"><pre class="screen verbatim verblines"><span class="line" db-line="1"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>-//OASIS//<em class="replaceable">text-class</em> DocBook <em class="replaceable">description</em> V<em class="replaceable">version</em>//EN</code></span></span>
</pre></div><p>Your public identifiers should use the following syntax:</p><div class="pre-wrap"><pre class="screen verbatim verblines"><span class="line" db-line="1"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>-//<em class="replaceable">Owner-ID</em>//<em class="replaceable">text-class</em> DocBook V<em class="replaceable">version</em>-Based (Subset|Extension|Variant) \</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code><em class="replaceable">Description-and-version</em>//<em class="replaceable">lang</em></code></span></span>
</pre></div><p>For example:</p><div class="pre-wrap"><pre class="screen verbatim verblines"><span class="line" db-line="1"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>-//O'Reilly//DTD DocBook V5.0-Based Subset V1.1//EN</code></span></span>
</pre></div><p><span class="indexterm" id="pubid_para5_indexterm1"></span><span class="indexterm" id="pubid_para5_indexterm2"></span>If your schema is a proper subset, use the
      <code class="literal">Subset</code> keyword in the description. If your schema
      extends the markup model, use the <code class="literal">Extension</code> keyword.
      If you’d rather not characterize your variant specifically as a subset
      or an extension, use the <code class="literal">Variant</code> <span class="keep-together phrase">keyword</span>.</p></section></section><section id="ch05-layers" class="section"><header><h2><span class="label">5<span class="sep">.</span>3</span><span class="sep">. </span>Customization Layers</h2></header><p>A RELAX NG grammar is a collection of patterns. These patterns can
    be stored in a single file or in a collection of files that import each
    other. Patterns can augment each other in a variety of ways. A complete
    grammar is the union of the specified patterns.</p><p>For convenience, the DocBook grammar is distributed in a single
    file.</p><section id="ch05-syntax" class="section"><header><h3><span class="label">5<span class="sep">.</span>3<span class="sep">.</span>1</span><span class="sep">. </span>RELAX NG Syntax</h3></header><p>There are two standard syntaxes for RELAX NG, an
      <span class="acronym">XML</span> syntax and a <q>compact</q> text syntax.
      The two forms have the same expressive power; it is possible to
      transform between them with no loss of information.</p><p>Many users find the relative terseness of the compact syntax makes
      it a convenient form for reading and writing RELAX NG. We will use
      compact syntax in our examples.</p></section><section id="ch05-patnames" class="section"><header><h3><span class="label">5<span class="sep">.</span>3<span class="sep">.</span>2</span><span class="sep">. </span>DocBook Schema Structure</h3></header><p><span class="indexterm" id="idx.schema-structure"></span>The DocBook RELAX NG schema is highly modular, using named
      patterns extensively. Every element, attribute, attribute list, and
      enumeration has its own named pattern. In addition, there are named
      patterns for logical combinations of elements and attributes. These
      named patterns provide <q>hooks</q> into the schema that allow
      you to do a wide range of customization by simply redefining one or more
      of the named patterns.</p><p>The names of the patterns used in a RELAX NG grammar can be
      defined in any way the schema designer chooses. To make it easier to
      navigate, the DocBook RELAX NG grammar employs the following naming
      conventions:<span class="indexterm" id="ch05-patnames_para2_indexterm1"></span><span class="indexterm" id="ch05-patnames_para2_indexterm2"></span></p><dl class="variablelist"><dt class="varlistentry"><span class="term"><code class="literal">db.<em class="replaceable">*</em>.attlist</code></span></dt><dd><p>Defines the list of attributes associated with an element.
            For example, <code class="literal">db.emphasis.attlist</code> is the pattern
            that matches all of the attributes of the
            <a href="emphasis.html"><code class="tag tag-element">emphasis</code></a> element.</p></dd><dt class="varlistentry"><span class="term"><code class="literal">db.<em class="replaceable">*</em>.attribute</code></span></dt><dd><p>Defines a single attribute. For example,
            <code class="literal">db.conformance.attribute</code> is the pattern that
            matches the <code class="tag tag-attribute">conformance</code>
            attribute on all of the elements where it occurs.</p></dd><dt class="varlistentry"><span class="term"><code class="literal">db.<em class="replaceable">*</em>.attributes</code></span></dt><dd><p>Defines a collection of attributes. For example,
            <code class="literal">db.effectivity.attributes</code> is all of the
            effectivity attributes (<code class="tag tag-attribute">arch</code>,
            <code class="tag tag-attribute">audience</code>, etc.).</p></dd><dt class="varlistentry"><span class="term"><code class="literal">db.<em class="replaceable">*</em>.blocks</code></span></dt><dd><p>Defines a list (a choice) of a set of related block
            elements. For example, <code class="literal">db.list.blocks</code> is a
            pattern that matches any of the list elements.</p></dd><dt class="varlistentry"><span class="term"><code class="literal">db.<em class="replaceable">*</em>.contentmodel</code></span></dt><dd><p>Defines a fragment of a content model shared by several
            elements.</p></dd><dt class="varlistentry"><span class="term"><code class="literal">db.<em class="replaceable">*</em>.enumeration</code></span></dt><dd><p>Defines an enumeration, usually one used in an attribute
            value. For example, <code class="literal">db.revisionflag.enumeration</code>
            is a pattern that matches the list of values that can be used as
            the value of a <code class="tag tag-attribute">revisionflag</code>
            attribute.</p></dd><dt class="varlistentry"><span class="term"><code class="literal">db.<em class="replaceable">*</em>.info</code></span></dt><dd><p>Defines the <a href="info.html"><code class="tag tag-element">info</code></a> element for a particular
            element. For example, <code class="literal">db.example.info</code> is the
            pattern that matches <a href="info.html"><code class="tag tag-element">info</code></a> on the
            <a href="example.html"><code class="tag tag-element">example</code></a> element.</p><p>Almost all of the <a href="info.html"><code class="tag tag-element">info</code></a> elements are the
            same, but they are described with distinct patterns so that
            customizers can change them individually.</p></dd><dt class="varlistentry"><span class="term"><code class="literal">db.<em class="replaceable">*</em>.inlines</code></span></dt><dd><p>Defines a list (a choice) of a set of related inline
            elements. For example, <code class="literal">db.link.inlines</code> is a
            pattern that matches any of the linking-related elements.</p></dd><dt class="varlistentry"><span class="term"><code class="literal">db.<em class="replaceable">*</em>.role.attribute</code></span></dt><dd><p>Defines the <code class="tag tag-attribute">role</code>
            attribute for a particular element. For example,
            <code class="literal">db.emphasis.role</code> is the pattern that matches
            <code class="tag tag-attribute">role</code> on the
            <a href="emphasis.html"><code class="tag tag-element">emphasis</code></a> element.</p><p>All of the <code class="tag tag-attribute">role</code>
            attributes are the same, but they are described with distinct
            patterns so that customizers can change them selectively.</p></dd><dt class="varlistentry"><span class="term"><code class="literal">db.<em class="replaceable">*</em></code></span></dt><dd><p>Defines a particular DocBook element. For example,
            <code class="literal">db.title</code> is the pattern that matches the
            <a href="title.html"><code class="tag tag-element">title</code></a> element.</p><p>RELAX NG allows multiple patterns to match the same element,
            so sometimes these patterns come in flavors, for example,
            <code class="literal">db.indexterm.singular</code>,
            <code class="literal">db.indexterm.startofrange</code>, and
            <code class="literal">db.indexterm.endofrange</code>. Each of these patterns
            matches <a href="indexterm.singular.html"><code class="tag tag-element">indexterm</code></a> with varying
            attributes.</p></dd></dl><p>These are conventions, not hard and fast rules. There are patterns
      that don’t follow these conventions.<span class="indexterm" id="ch05-patnames_para3_indexterm1"></span></p></section><section id="ch05-genstruct" class="section"><header><h3><span class="label">5<span class="sep">.</span>3<span class="sep">.</span>3</span><span class="sep">. </span>The General Structure of Customization Layers</h3></header><p><span class="indexterm" id="ch05-genstruct_para1_indexterm1"></span><span class="indexterm" id="ch05-genstruct_para1_indexterm2"></span>Creating a customized schema is similar to creating a
      customization layer for <span class="acronym">XSL</span>. The schema customization
      layer is a new RELAX NG schema that defines your changes and includes
      the standard DocBook schema. You then validate using the schema
      customization as your schema. Although customization layers vary in
      complexity, most of them have the same general structure as other
      customization layers of similar <span class="keep-together phrase">complexity</span>.</p><p>In the most common case, you probably want to include all of
      DocBook, but you want to make some small changes. These customization
      layers tend to look like this:</p><div class="screenco"><div class="pre-wrap"><pre class="screen verbatim verblines"><span class="line" db-line="1"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>namespace db = "http://docbook.org/ns/docbook"</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code># perhaps other namespace declarations</code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="4"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>include "docbook.rnc"                            <a id="gs1-d1" class="callout-bug linecolumn" db-line="4" db-column="50">①</a></code></span></span>
<span class="line" db-line="5"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="6"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code># new patterns and augmented patterns            <a id="gs1-n1" class="callout-bug linecolumn" db-line="6" db-column="50">②</a></code></span></span>
</pre></div><div class="calloutlist"><dl><dt id="list_gs1-d1" class="callout"><a class="callout-bug" href="#gs1-d1">①</a></dt><dd><p>Start by importing the base DocBook schema.</p></dd><dt id="list_gs1-n1" class="callout"><a class="callout-bug" href="#gs1-n1">②</a></dt><dd><p>Then you can add new patterns or augment existing
    patterns.</p></dd></dl></div></div><p>If you want to completely replace a pattern (e.g., to remove or
completely change an element), the template is a little
different.</p><div class="screenco"><div class="pre-wrap"><pre class="screen verbatim verblines"><span class="line" db-line="1"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>namespace db = "http://docbook.org/ns/docbook"</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code># perhaps other namespace declarations</code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="4"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>include "docbook.rnc" {</code></span></span>
<span class="line" db-line="5"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>   # redefinitions of DocBook patterns           <a id="gs2-d1" class="callout-bug linecolumn" db-line="5" db-column="50">①</a></code></span></span>
<span class="line" db-line="6"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>}</code></span></span>
<span class="line" db-line="7"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="8"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code># new patterns and augmented patterns            <a id="gs2-n1" class="callout-bug linecolumn" db-line="8" db-column="50">②</a></code></span></span>
</pre></div><div class="calloutlist"><dl><dt id="list_gs2-d1" class="callout"><a class="callout-bug" href="#gs2-d1">①</a></dt><dd><p>You can redefine patterns in the body of an import statement.
          These patterns completely replace any that appear in the imported
          schema.</p></dd><dt id="list_gs2-n1" class="callout"><a class="callout-bug" href="#gs2-n1">②</a></dt><dd><p>As before, patterns outside the include statement can augment
          existing patterns (even redefined ones).</p></dd></dl></div></div><p>There are other possibilities as well; these examples are
      illustrative, not exhaustive.</p></section></section><section id="ch05-write" class="section"><header><h2><span class="label">5<span class="sep">.</span>4</span><span class="sep">. </span>Writing, Testing, and Using a Customization Layer</h2></header><p><span class="indexterm" id="idx.wtu-layer-1"></span><span class="indexterm" id="idx.wtu-layer-2"></span>The procedure for writing, testing, and using a
    customization layer is always about the same. In this section, we’ll go
    through the process in some detail. The rest of the sections in this
    chapter describe a range of useful customization layers.</p><section id="ch05-write_s1" class="section"><header><h3><span class="label">5<span class="sep">.</span>4<span class="sep">.</span>1</span><span class="sep">. </span>Deciding What to Change</h3></header><p>If you’re considering writing a customization layer, there must be
      something that you want to change. Perhaps you want to add an element or
      attribute, remove one, or change some other aspect of the schema.</p><p><span class="indexterm" id="ch05-write_s1_para2_indexterm1"></span>Adding an element, particularly an inline element, is one
      possibility. For example, if you’re writing about cryptography, you
      might want to add a <q><code class="literal">cleartext</code></q> element.
      The next section describes how to create a customization layer to do
      this.</p></section><section id="ch05-write_s2" class="section"><header><h3><span class="label">5<span class="sep">.</span>4<span class="sep">.</span>2</span><span class="sep">. </span>Deciding How to Change a Customization Layer</h3></header><p><span class="indexterm" id="ch05-write_s2_para1_indexterm1"></span>Figuring out what to change may be the hardest part of the
      process. For the cleartext
      example, there are several patterns that you could possibly change. The
      choice will depend on the exact focus of your document. Here are several
      candidates, all of which look plausible: technical inlines, programming
      inlines, and domain inlines. Let’s suppose you chose the domain
      inlines.</p><p>As shown in <a href="#ex-addcleartext" class="xref xref-example">Example <span class="label">5<span class="sep">.</span>4<span class="sep">.</span>2<span class="sep">.</span>1</span>, “Adding cleartext with a customization layer”</a>, your customization
      would import the DocBook schema, extend the domain inlines, and then
      provide a pattern that matches the new element.</p><div id="ex-addcleartext" class="example formalobject"><div class="pre-wrap" db-startinglinenumber="1" db-numberoflines="20"><pre class="language-none long numbered programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln"> 1 <span class="nsep">|</span></span><span class="ld"><code>namespace db = "http://docbook.org/ns/docbook"</code></span></span>
<span class="line" db-line="2"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>default namespace = "http://docbook.org/ns/docbook"</code></span></span>
<span class="line" db-line="3"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="4"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>include "docbook.rnc"</code></span></span>
<span class="line" db-line="5"><span class="ln"> 5 <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="6"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>db.domain.inlines |= db.cleartext                 <a class="co" id="gs3-d1">①</a></code></span></span>
<span class="line" db-line="7"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="8"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code># Define a new cleartext element:                 <a class="co" id="gs3-d1b">②</a></code></span></span>
<span class="line" db-line="9"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="10"><span class="ln">10 <span class="nsep">|</span></span><span class="ld"><code>db.cleartext.role.attribute = attribute role { text }    <a class="co" id="gs3-d2">③</a></code></span></span>
<span class="line" db-line="11"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>db.cleartext.attlist =                            <a class="co" id="gs3-d3">④</a></code></span></span>
<span class="line" db-line="12"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>   db.cleartext.role.attribute?</code></span></span>
<span class="line" db-line="13"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> &amp; db.common.attributes</code></span></span>
<span class="line" db-line="14"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> &amp; db.common.linking.attributes</code></span></span>
<span class="line" db-line="15"><span class="ln">15 <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="16"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>db.cleartext =                                    <a class="co" id="gs3-d4">⑤</a></code></span></span>
<span class="line" db-line="17"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>   element cleartext {</code></span></span>
<span class="line" db-line="18"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>      db.cleartext.attlist,</code></span></span>
<span class="line" db-line="19"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>      db._text</code></span></span>
<span class="line" db-line="20"><span class="ln">20 <span class="nsep">|</span></span><span class="ld"><code>   }</code></span></span>
</pre></div><div class="calloutlist"><dl><dt id="list_gs3-d1" class="callout"><a class="callout-bug" href="#gs3-d1">①</a></dt><dd><p>The <code class="literal">|=</code> operator adds a new choice to a
    pattern. So this line makes the <code class="literal">db.cleartext</code>
    pattern a valid option anywhere that
    <code class="literal">db.domain.inlines</code> appears.</p></dd><dt id="list_gs3-d1b" class="callout"><a class="callout-bug" href="#gs3-d1b">②</a></dt><dd><p>Next, we create a pattern for the
    <code class="literal">cleartext</code> element. The convention in the
    DocBook schema is to create three patterns, one for the <code class="tag tag-attribute">role</code> attribute, one for all the
    attributes, and one for the element. By following this convention,
    we make it easier for someone to customize our
    customization.</p></dd><dt id="list_gs3-d2" class="callout"><a class="callout-bug" href="#gs3-d2">③</a></dt><dd><p>Defining a separate pattern for the <code class="tag tag-attribute">role</code>
    attribute makes it easy for customizers to change it on a
    per-element basis.</p></dd><dt id="list_gs3-d3" class="callout"><a class="callout-bug" href="#gs3-d3">④</a></dt><dd><p>Defining a separate pattern for the attributes makes it easy
    for customizers to change them on a per-element basis. This
    pattern includes the pattern we just created for the <code class="tag tag-attribute">role</code> attribute.</p></dd><dt id="list_gs3-d4" class="callout"><a class="callout-bug" href="#gs3-d4">⑤</a></dt><dd><p>The pattern for the element pulls it all together. The
    pattern <code class="literal">db._text</code> matches text plus a number of
    ubiquitous or nearly ubiquitous inlines. Use this pattern unless
    you <em>really</em> want only text.</p></dd></dl></div><header><div class="title">Example <span class="label">5<span class="sep">.</span>4<span class="sep">.</span>2<span class="sep">.</span>1</span><span class="sep">. </span>Adding cleartext with a customization layer</div></header></div></section><section id="ch05-write_s3" class="section"><header><h3><span class="label">5<span class="sep">.</span>4<span class="sep">.</span>3</span><span class="sep">. </span>Using Your Customization Layer</h3></header><p>Using a customization layer is simple. Just put the customization
      into a file—for example, <code class="filename">mycustomization.rnc</code>—and
      then refer to that file instead of the DocBook schema when your tools
      offer the option.</p></section><section id="cust.test" class="section"><header><h3><span class="label">5<span class="sep">.</span>4<span class="sep">.</span>4</span><span class="sep">. </span>Testing Your Work</h3></header><p><span class="indexterm" id="cust.test_para1_indexterm1"></span><span class="indexterm" id="cust.test_para1_indexterm2"></span><span class="indexterm" id="cust.test_para1_indexterm3"></span>Schemas, by their nature, contain many complex,
      interrelated patterns. Whenever you make a change to the schema, it’s
      always wise to use a validator to check your work.</p><p>Start by validating a document that’s plain, vanilla DocBook, one
      that you know is valid according to the DocBook standard schema. This
      will help you identify any errors that you’ve introduced to the schema.
      Once you are confident the schema is correct, begin testing with
      instances that you expect (and don’t expect) to be valid against
      it.</p><p>The following sections contain examples for several common
      customizations.<span class="indexterm" id="cust.test_para3_indexterm1"></span><span class="indexterm" id="cust.test_para3_indexterm2"></span></p></section></section><section id="ch05-remvelem" class="section"><header><h2><span class="label">5<span class="sep">.</span>5</span><span class="sep">. </span>Removing Elements</h2></header><p><span class="indexterm" id="idx.remove.elements-1"></span><span class="indexterm" id="idx.remove.elements-2"></span>DocBook has a large number of elements. In some authoring
    environments, it may be useful or necessary to remove unneeded
    elements.</p><section id="ch05-remvelem_s1" class="section"><header><h3><span class="label">5<span class="sep">.</span>5<span class="sep">.</span>1</span><span class="sep">. </span>Removing msgset</h3></header><p><span class="indexterm" id="ch05-remvelem_s1_para1_indexterm1"></span>The <a href="msgset.html"><code class="tag tag-element">msgset</code></a> element is a favorite
      target. It has a complex internal structure designed for describing
      interrelated error messages, especially on systems that may exhibit
      messages from several different components. Many technical documents can
      do without it, and removing it leaves one less complexity to explain to
      your authors.</p><p><a href="#ex.remvmsgset" class="xref xref-example">Example <span class="label">5<span class="sep">.</span>5<span class="sep">.</span>1<span class="sep">.</span>1</span>, “Removing msgset”</a> shows a customization layer that
      removes the <a href="msgset.html"><code class="tag tag-element">msgset</code></a> element.</p><div id="ex.remvmsgset" class="example formalobject"><div class="pre-wrap" db-startinglinenumber="1" db-numberoflines="5"><pre class="language-none long numbered programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">1 <span class="nsep">|</span></span><span class="ld"><code>namespace db = "http://docbook.org/ns/docbook"</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>include "docbook.rnc" {</code></span></span>
<span class="line" db-line="4"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>   db.msgset = notAllowed</code></span></span>
<span class="line" db-line="5"><span class="ln">5 <span class="nsep">|</span></span><span class="ld"><code>}</code></span></span>
</pre></div><header><div class="title">Example <span class="label">5<span class="sep">.</span>5<span class="sep">.</span>1<span class="sep">.</span>1</span><span class="sep">. </span>Removing msgset</div></header></div><p>The complexity of <a href="msgset.html"><code class="tag tag-element">msgset</code></a> is really in its
      <a href="msgentry.html"><code class="tag tag-element">msgentry</code></a> children. DocBook <span class="acronym">V4.5</span>
      introduced a simple alternative, <a href="simplemsgentry.html"><code class="tag tag-element">simplemsgentry</code></a>.
      <a href="#ex.remvmsgentry" class="xref xref-example">Example <span class="label">5<span class="sep">.</span>5<span class="sep">.</span>1<span class="sep">.</span>2</span>, “Removing msgentry”</a> demonstrates how you could allow
      <a href="msgset.html"><code class="tag tag-element">msgset</code></a> but only support the simpler
      alternative.</p><div id="ex.remvmsgentry" class="example formalobject"><div class="pre-wrap" db-startinglinenumber="1" db-numberoflines="5"><pre class="language-none long numbered programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">1 <span class="nsep">|</span></span><span class="ld"><code>namespace db = "http://docbook.org/ns/docbook"</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>include "docbook.rnc" {</code></span></span>
<span class="line" db-line="4"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>   db.msgentry = notAllowed</code></span></span>
<span class="line" db-line="5"><span class="ln">5 <span class="nsep">|</span></span><span class="ld"><code>}</code></span></span>
</pre></div><header><div class="title">Example <span class="label">5<span class="sep">.</span>5<span class="sep">.</span>1<span class="sep">.</span>2</span><span class="sep">. </span>Removing msgentry</div></header></div><p>Closer examination of the <a href="msgentry.html"><code class="tag tag-element">msgentry</code></a> content
      model will reveal that it contains a number of descendants. It isn’t
      necessary, but it wouldn’t be wrong, to define their patterns as
      <code class="literal">notAllowed</code> as well.</p></section><section id="ch05-remvelem_s2" class="section"><header><h3><span class="label">5<span class="sep">.</span>5<span class="sep">.</span>2</span><span class="sep">. </span>Removing Computer Inlines</h3></header><p><span class="indexterm" id="ch05-remvelem_s2_para1_indexterm1"></span>DocBook contains a large number of computer inlines. The
      DocBook inlines define a domain-specific vocabulary. If you’re working
      in another domain, many of them may be unnecessary.</p><p>They’re defined in a set of patterns that ultimately roll up to
      the <code class="literal">db.domain.inlines</code> pattern. If you make that
      pattern <code class="literal">notAllowed</code>, you’ll remove them all in one
      fell swoop. <a href="#ex.rmvcompinlines" class="xref xref-example">Example <span class="label">5<span class="sep">.</span>5<span class="sep">.</span>2<span class="sep">.</span>1</span>, “Removing computer inlines”</a> is a customization that
      does this.</p><div id="ex.rmvcompinlines" class="example formalobject"><div class="pre-wrap" db-startinglinenumber="1" db-numberoflines="5"><pre class="language-none long numbered programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">1 <span class="nsep">|</span></span><span class="ld"><code>namespace db = "http://docbook.org/ns/docbook"</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>include "docbook.rnc" {</code></span></span>
<span class="line" db-line="4"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>   db.domain.inlines = notAllowed</code></span></span>
<span class="line" db-line="5"><span class="ln">5 <span class="nsep">|</span></span><span class="ld"><code>}</code></span></span>
</pre></div><header><div class="title">Example <span class="label">5<span class="sep">.</span>5<span class="sep">.</span>2<span class="sep">.</span>1</span><span class="sep">. </span>Removing computer inlines</div></header></div><p>If you want to be more selective, you might consider making one or
      more of the <span class="keep-together phrase">following</span>
      <code class="literal">notAllowed</code> instead:</p><ul class="itemizedlist"><li><p><code class="literal">db.error.inlines</code>: errors and error
          messages</p></li><li><p><code class="literal">db.gui.inlines</code>: GUI elements</p></li><li><p><code class="literal">db.keyboard.inlines</code>: key and keyboard
          elements</p></li><li><p><code class="literal">db.markup.inlines</code>: markup elements</p></li><li><p><code class="literal">db.math.inlines</code>: mathematical
          expressions</p></li><li><p><code class="literal">db.os.inlines</code>: operating system
          inlines</p></li><li><p><code class="literal">db.programming.inlines</code>: programming-related
          inlines</p></li></ul><div class="admonition caution"><div><div class="icon">⚠</div><div class="body"><header><div class="title">Caution</div></header><div><p>Be aware that a customization layer that removed this many
        technical inlines would also remove some larger technical structures
        or make them unusable.</p></div></div></div></div></section><section id="ch05-remvelem_s3" class="section"><header><h3><span class="label">5<span class="sep">.</span>5<span class="sep">.</span>3</span><span class="sep">. </span>Removing Synopsis Elements</h3></header><p><span class="indexterm" id="ch05-remvelem_s3_para1_indexterm1"></span><span class="indexterm" id="ch05-remvelem_s3_para1_indexterm2"></span><span class="indexterm" id="ch05-remvelem_s3_para1_indexterm3"></span>Another possibility is removing the complex synopsis
      elements. The customization layer in <a href="#ex.remvcmdsyn" class="xref xref-example">Example <span class="label">5<span class="sep">.</span>5<span class="sep">.</span>3<span class="sep">.</span>1</span>, “Removing cmdsynopsis and funcsynopsis”</a>
      removes <a href="cmdsynopsis.html"><code class="tag tag-element">cmdsynopsis</code></a> and
      <a href="funcsynopsis.html"><code class="tag tag-element">funcsynopsis</code></a>.</p><div id="ex.remvcmdsyn" class="example formalobject"><div class="pre-wrap" db-startinglinenumber="1" db-numberoflines="6"><pre class="language-none long numbered programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">1 <span class="nsep">|</span></span><span class="ld"><code>namespace db = "http://docbook.org/ns/docbook"</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>include "docbook.rnc" {</code></span></span>
<span class="line" db-line="4"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>   db.funcsynopsis = notAllowed</code></span></span>
<span class="line" db-line="5"><span class="ln">5 <span class="nsep">|</span></span><span class="ld"><code>   db.cmdsynopsis = notAllowed</code></span></span>
<span class="line" db-line="6"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>}</code></span></span>
</pre></div><header><div class="title">Example <span class="label">5<span class="sep">.</span>5<span class="sep">.</span>3<span class="sep">.</span>1</span><span class="sep">. </span>Removing cmdsynopsis and funcsynopsis</div></header></div></section><section id="ch05-remvelem_s4" class="section"><header><h3><span class="label">5<span class="sep">.</span>5<span class="sep">.</span>4</span><span class="sep">. </span>Removing Sectioning Elements</h3></header><p><span class="indexterm" id="ch05-remvelem_s4_para1_indexterm1"></span>Perhaps you want to restrict your authors to only three
      levels of sectioning. To do that, you could remove the
      <a href="sect4.html"><code class="tag tag-element">sect4</code></a> and <a href="sect5.html"><code class="tag tag-element">sect5</code></a> elements, as shown
      in <a href="#ex.remvsect4" class="xref xref-example">Example <span class="label">5<span class="sep">.</span>5<span class="sep">.</span>4<span class="sep">.</span>1</span>, “Removing the sect4 and sect5 elements”</a>.</p><div id="ex.remvsect4" class="example formalobject"><div class="pre-wrap" db-startinglinenumber="1" db-numberoflines="9"><pre class="language-none long numbered programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">1 <span class="nsep">|</span></span><span class="ld"><code>namespace db = "http://docbook.org/ns/docbook"</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>include "docbook.rnc" {</code></span></span>
<span class="line" db-line="4"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>   db.sect4 = notAllowed</code></span></span>
<span class="line" db-line="5"><span class="ln">5 <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="6"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>   # Strictly speaking, we don't need to remove sect5 because, having removed</code></span></span>
<span class="line" db-line="7"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>   # sect4, there's no way to reach it. But it seems cleaner to do so.</code></span></span>
<span class="line" db-line="8"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>   db.sect5 = notAllowed</code></span></span>
<span class="line" db-line="9"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>}</code></span></span>
</pre></div><header><div class="title">Example <span class="label">5<span class="sep">.</span>5<span class="sep">.</span>4<span class="sep">.</span>1</span><span class="sep">. </span>Removing the sect4 and sect5 elements</div></header></div><p>This technique works if your authors are using numbered sections,
      which you could require them to do by removing the
      <a href="section.html"><code class="tag tag-element">section</code></a> element. But suppose instead you want to
      allow them to use recursive sections, but limit them to only three
      levels.</p><p>One way to do this would be to define new
      <code class="literal">section2</code> and <code class="literal">section3</code> patterns, as
      shown in <a href="#ex.limitsdepth" class="xref xref-example">Example <span class="label">5<span class="sep">.</span>5<span class="sep">.</span>4<span class="sep">.</span>2</span>, “Limiting recursive sections to three levels”</a>.</p><div id="ex.limitsdepth" class="example formalobject"><div class="pre-wrap" db-startinglinenumber="1" db-numberoflines="38"><pre class="language-none long numbered programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln"> 1 <span class="nsep">|</span></span><span class="ld"><code>namespace db = "http://docbook.org/ns/docbook"</code></span></span>
<span class="line" db-line="2"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>default namespace = "http://docbook.org/ns/docbook"</code></span></span>
<span class="line" db-line="3"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="4"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>include "docbook.rnc" {</code></span></span>
<span class="line" db-line="5"><span class="ln"> 5 <span class="nsep">|</span></span><span class="ld"><code>   db.section =</code></span></span>
<span class="line" db-line="6"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>      element section {</code></span></span>
<span class="line" db-line="7"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>         db.section.attlist,</code></span></span>
<span class="line" db-line="8"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>         db.section.info,</code></span></span>
<span class="line" db-line="9"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>         db.recursive.blocks.or.section2s,</code></span></span>
<span class="line" db-line="10"><span class="ln">10 <span class="nsep">|</span></span><span class="ld"><code>         db.navigation.components*</code></span></span>
<span class="line" db-line="11"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>      }</code></span></span>
<span class="line" db-line="12"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>}</code></span></span>
<span class="line" db-line="13"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="14"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>db.recursive.section2s = (db.section2+, db.simplesect*) | db.simplesect+</code></span></span>
<span class="line" db-line="15"><span class="ln">15 <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="16"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>db.recursive.blocks.or.section2s =</code></span></span>
<span class="line" db-line="17"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>  (db.all.blocks+, db.recursive.section2s?) | db.recursive.section2s</code></span></span>
<span class="line" db-line="18"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="19"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>db.section2 =</code></span></span>
<span class="line" db-line="20"><span class="ln">20 <span class="nsep">|</span></span><span class="ld"><code>   element section {</code></span></span>
<span class="line" db-line="21"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>      db.section.attlist,</code></span></span>
<span class="line" db-line="22"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>      db.section.info,</code></span></span>
<span class="line" db-line="23"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>      db.recursive.blocks.or.section3s,</code></span></span>
<span class="line" db-line="24"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>      db.navigation.components*</code></span></span>
<span class="line" db-line="25"><span class="ln">25 <span class="nsep">|</span></span><span class="ld"><code>   }</code></span></span>
<span class="line" db-line="26"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="27"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>db.recursive.section3s = (db.section3+, db.simplesect*) | db.simplesect+</code></span></span>
<span class="line" db-line="28"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="29"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>db.recursive.blocks.or.section3s =</code></span></span>
<span class="line" db-line="30"><span class="ln">30 <span class="nsep">|</span></span><span class="ld"><code>  (db.all.blocks+, db.recursive.section3s?) | db.recursive.section3s</code></span></span>
<span class="line" db-line="31"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="32"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>db.section3 =</code></span></span>
<span class="line" db-line="33"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>   element section {</code></span></span>
<span class="line" db-line="34"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>      db.section.attlist,</code></span></span>
<span class="line" db-line="35"><span class="ln">35 <span class="nsep">|</span></span><span class="ld"><code>      db.section.info,</code></span></span>
<span class="line" db-line="36"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>      db.all.blocks+</code></span></span>
<span class="line" db-line="37"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>      db.navigation.components*</code></span></span>
<span class="line" db-line="38"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>   }</code></span></span>
</pre></div><header><div class="title">Example <span class="label">5<span class="sep">.</span>5<span class="sep">.</span>4<span class="sep">.</span>2</span><span class="sep">. </span>Limiting recursive sections to three levels</div></header></div><p>Another solution, assuming your validation environment supports
      Schematron, is simply to add a new rule, as shown in <a href="#ex.limitsdepthsch" class="xref xref-example">Example <span class="label">5<span class="sep">.</span>5<span class="sep">.</span>4<span class="sep">.</span>3</span>, “Limiting recursive sections to three levels using
        Schematron”</a>.</p><div id="ex.limitsdepthsch" class="example formalobject"><div class="pre-wrap" db-startinglinenumber="1" db-numberoflines="25"><pre class="language-none long numbered programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln"> 1 <span class="nsep">|</span></span><span class="ld"><code>namespace db = "http://docbook.org/ns/docbook"</code></span></span>
<span class="line" db-line="2"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>namespace s = "http://www.ascc.net/xml/schematron"</code></span></span>
<span class="line" db-line="3"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>default namespace = "http://docbook.org/ns/docbook"</code></span></span>
<span class="line" db-line="4"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="5"><span class="ln"> 5 <span class="nsep">|</span></span><span class="ld"><code>include "docbook.rnc" {</code></span></span>
<span class="line" db-line="6"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>   db.section =</code></span></span>
<span class="line" db-line="7"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>      [</code></span></span>
<span class="line" db-line="8"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>         s:pattern [</code></span></span>
<span class="line" db-line="9"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>            name = "Limit depth of sections"</code></span></span>
<span class="line" db-line="10"><span class="ln">10 <span class="nsep">|</span></span><span class="ld"><code>            s:rule [</code></span></span>
<span class="line" db-line="11"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>               context = "db:section"</code></span></span>
<span class="line" db-line="12"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>               s:assert [</code></span></span>
<span class="line" db-line="13"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>                  test = "count(ancestor::db:section) &lt; 2"</code></span></span>
<span class="line" db-line="14"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>                  "Sections can be no more than three levels deep"</code></span></span>
<span class="line" db-line="15"><span class="ln">15 <span class="nsep">|</span></span><span class="ld"><code>               ]</code></span></span>
<span class="line" db-line="16"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>            ]</code></span></span>
<span class="line" db-line="17"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>         ]</code></span></span>
<span class="line" db-line="18"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>      ]</code></span></span>
<span class="line" db-line="19"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>      element section {</code></span></span>
<span class="line" db-line="20"><span class="ln">20 <span class="nsep">|</span></span><span class="ld"><code>         db.section.attlist,</code></span></span>
<span class="line" db-line="21"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>         db.section.info,</code></span></span>
<span class="line" db-line="22"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>         db.recursive.blocks.or.sections,</code></span></span>
<span class="line" db-line="23"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>         db.navigation.components*</code></span></span>
<span class="line" db-line="24"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>      }</code></span></span>
<span class="line" db-line="25"><span class="ln">25 <span class="nsep">|</span></span><span class="ld"><code>}</code></span></span>
</pre></div><header><div class="title">Example <span class="label">5<span class="sep">.</span>5<span class="sep">.</span>4<span class="sep">.</span>3</span><span class="sep">. </span>Limiting recursive sections to three levels using
        Schematron</div></header></div><p>In this example, we’ve put the Schematron pattern inline in the
      RELAX NG grammar. If your validation strategy requires that they be in a
      separate document, it may be more convenient to simply create them
      separately.</p></section><section id="s2-remvadmon" class="section"><header><h3><span class="label">5<span class="sep">.</span>5<span class="sep">.</span>5</span><span class="sep">. </span>Removing Admonitions from Table Entries</h3></header><p><span class="indexterm" id="s2-remvadmon_para1_indexterm1"></span> <span class="indexterm" id="s2-remvadmon_para1_indexterm2"></span>Sometimes what you want to do is not as simple as entirely
      removing an element. Instead, you may want to remove it only from some
      contexts. The way to do this is to redefine the patterns used to
      calculate the elements allowed in those contexts.</p><p>Standard DocBook allows any inline element or any block element to
      appear in a table cell. You might decide that it’s unreasonable to allow
      admonitions (<a href="note.html"><code class="tag tag-element">note</code></a>, <a href="caution.html"><code class="tag tag-element">caution</code></a>,
      <a href="warning.html"><code class="tag tag-element">warning</code></a>, etc.) to appear in a table cell.</p><p>In order to remove them, you must change what is allowed in the
      <a href="entry.html"><code class="tag tag-element">entry</code></a> element, as shown in <a href="#ex.remvadmon" class="xref xref-example">Example <span class="label">5<span class="sep">.</span>5<span class="sep">.</span>5<span class="sep">.</span>1</span>, “Removing admonitions from tables”</a>.</p><div id="ex.remvadmon" class="example formalobject"><div class="pre-wrap" db-startinglinenumber="1" db-numberoflines="28"><pre class="language-none long numbered programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln"> 1 <span class="nsep">|</span></span><span class="ld"><code>namespace db = "http://docbook.org/ns/docbook"</code></span></span>
<span class="line" db-line="2"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>default namespace = "http://docbook.org/ns/docbook"</code></span></span>
<span class="line" db-line="3"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="4"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>include "docbook.rnc" {</code></span></span>
<span class="line" db-line="5"><span class="ln"> 5 <span class="nsep">|</span></span><span class="ld"><code>   db.entry = element entry {</code></span></span>
<span class="line" db-line="6"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>      db.entry.attlist,</code></span></span>
<span class="line" db-line="7"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>      (db.all.inlines* | db.some.blocks*)</code></span></span>
<span class="line" db-line="8"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>   }</code></span></span>
<span class="line" db-line="9"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>}</code></span></span>
<span class="line" db-line="10"><span class="ln">10 <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="11"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>db.some.blocks =</code></span></span>
<span class="line" db-line="12"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>   db.somenopara.blocks</code></span></span>
<span class="line" db-line="13"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> | db.para.blocks</code></span></span>
<span class="line" db-line="14"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> | db.extension.blocks</code></span></span>
<span class="line" db-line="15"><span class="ln">15 <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="16"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>db.somenopara.blocks =</code></span></span>
<span class="line" db-line="17"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>   db.list.blocks</code></span></span>
<span class="line" db-line="18"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> | db.formal.blocks</code></span></span>
<span class="line" db-line="19"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> | db.informal.blocks</code></span></span>
<span class="line" db-line="20"><span class="ln">20 <span class="nsep">|</span></span><span class="ld"><code> | db.publishing.blocks</code></span></span>
<span class="line" db-line="21"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> | db.graphic.blocks</code></span></span>
<span class="line" db-line="22"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> | db.technical.blocks</code></span></span>
<span class="line" db-line="23"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> | db.verbatim.blocks</code></span></span>
<span class="line" db-line="24"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> | db.bridgehead</code></span></span>
<span class="line" db-line="25"><span class="ln">25 <span class="nsep">|</span></span><span class="ld"><code> | db.remark</code></span></span>
<span class="line" db-line="26"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> | db.revhistory</code></span></span>
<span class="line" db-line="27"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> | db.indexterm</code></span></span>
<span class="line" db-line="28"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> | db.synopsis.blocks</code></span></span>
</pre></div><header><div class="title">Example <span class="label">5<span class="sep">.</span>5<span class="sep">.</span>5<span class="sep">.</span>1</span><span class="sep">. </span>Removing admonitions from tables</div></header></div><p>The extent to which any particular change is easy or hard depends
      in part on how many patterns need to be changed. The DocBook Technical
      Committee is generally open to the idea of adding more patterns if it
      improves the readability of customization layers. If you think some
      refactoring would make your job easier, feel free to ask.<span class="indexterm" id="s2-remvadmon_para4_indexterm1"></span><span class="indexterm" id="s2-remvadmon_para4_indexterm2"></span></p></section></section><section id="ch05-remvattr" class="section"><header><h2><span class="label">5<span class="sep">.</span>6</span><span class="sep">. </span>Removing Attributes</h2></header><p><span class="indexterm" id="idx.remove.attr-1"></span><span class="indexterm" id="idx.remove.attr-2"></span>Just as there may be more elements than you need, there may
    be more attributes.</p><p>Suppose your processing system doesn’t support
    <q>continued</q> lists. You want to remove the <code class="tag tag-attribute">continuation</code> attribute from the
    <a href="orderedlist.html"><code class="tag tag-element">orderedlist</code></a> element. There are two ways you could
    accomplish this. One way would be to redefine the
    <code class="literal">db.orderedlist.continuation.attribute</code> pattern as not
    allowed; the other would be to redefine the
    <code class="literal">db.orderedlist.attlist</code> pattern so that it does not
    include the <code class="tag tag-attribute">continuation</code> attribute.
    Either will accomplish the goal. <a href="#ex.remvcontinuation" class="xref xref-example">Example <span class="label">5<span class="sep">.</span>6<span class="sep">.</span>1</span>, “Removing continuation from orderedlist”</a>
    uses the first method.</p><div id="ex.remvcontinuation" class="example formalobject"><div class="pre-wrap" db-startinglinenumber="1" db-numberoflines="5"><pre class="language-none long numbered programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">1 <span class="nsep">|</span></span><span class="ld"><code>namespace db = "http://docbook.org/ns/docbook"</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>include "docbook.rnc" {</code></span></span>
<span class="line" db-line="4"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>   db.orderedlist.continuation.attribute = empty</code></span></span>
<span class="line" db-line="5"><span class="ln">5 <span class="nsep">|</span></span><span class="ld"><code>}</code></span></span>
</pre></div><header><div class="title">Example <span class="label">5<span class="sep">.</span>6<span class="sep">.</span>1</span><span class="sep">. </span>Removing continuation from orderedlist</div></header></div><section id="ch05-remvattr_s1" class="section"><header><h3><span class="label">5<span class="sep">.</span>6<span class="sep">.</span>1</span><span class="sep">. </span>Subsetting the Common Attributes</h3></header><p><span class="indexterm" id="ch05-remvattr_s1_para1_indexterm1"></span> <span class="indexterm" id="ch05-remvattr_s1_para1_indexterm2"></span>DocBook defines a set of <q>common attributes,</q>
      which appear on <em>every</em> element. Depending on how you
      process your documents, removing some of them can both simplify the
      authoring task and improve processing speed.</p><p>Some obvious candidates are:</p><dl class="long-terms variablelist"><dt class="varlistentry"><span class="term">Effectivity attributes (<code class="tag tag-attribute">arch</code>, <code class="tag tag-attribute">os</code>, <code class="tag tag-attribute">condition</code>...)</span></dt><dd><p><span class="indexterm" id="ch05-remvattr_s1_variablelist1_varlistentry1_listitem1_para1_indexterm1"></span>If you’re not using all of the effectivity
            attributes in your documents, you can get rid of up to seven
            attributes in one fell swoop.</p></dd><dt class="varlistentry"><span class="term"><code class="tag tag-attribute">xml:lang</code></span></dt><dd><p><span class="indexterm" id="ch05-remvattr_s1_variablelist1_varlistentry2_listitem1_para1_indexterm1"></span>If you’re not producing multilingual documents, you
            can remove <code class="tag tag-attribute">xml:lang</code>.</p></dd><dt class="varlistentry"><span class="term"><code class="tag tag-attribute">remap</code></span></dt><dd><p><span class="indexterm" id="ch05-remvattr_s1_variablelist1_varlistentry3_listitem1_para1_indexterm1"></span>The <code class="tag tag-attribute">remap</code>
            attribute is designed to hold the name of a semantically
            equivalent construct from a previous markup scheme (e.g., a
            Microsoft Word–style template name, if you’re converting from
            Word). If you’re authoring from scratch, or not preserving
            previous constructs with <code class="tag tag-attribute">remap</code>, you can get rid of it.</p></dd><dt class="varlistentry"><span class="term"><code class="tag tag-attribute">xreflabel</code></span></dt><dd><p><span class="indexterm" id="ch05-remvattr_s1_variablelist1_varlistentry4_listitem1_para1_indexterm1"></span>If your processing system isn’t using <code class="tag tag-attribute">xreflabel</code>, it’s a candidate as
            well.</p></dd></dl><p>The customization layer in <a href="#ex.remvcommon" class="xref xref-example">Example <span class="label">5<span class="sep">.</span>6<span class="sep">.</span>1<span class="sep">.</span>1</span>, “Removing common attributes”</a>
      reduces the common attributes to just <code class="tag tag-attribute">xml:id</code>, <code class="tag tag-attribute">version</code>, and <code class="tag tag-attribute">xml:lang</code>.<span class="indexterm" id="ch05-remvattr_s1_para3_indexterm1"></span><span class="indexterm" id="ch05-remvattr_s1_para3_indexterm2"></span></p><div id="ex.remvcommon" class="example formalobject"><div class="pre-wrap" db-startinglinenumber="1" db-numberoflines="7"><pre class="language-none long numbered programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">1 <span class="nsep">|</span></span><span class="ld"><code>namespace db = "http://docbook.org/ns/docbook"</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>include "docbook.rnc" {</code></span></span>
<span class="line" db-line="4"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>   db.common.base.attributes =</code></span></span>
<span class="line" db-line="5"><span class="ln">5 <span class="nsep">|</span></span><span class="ld"><code>      db.version.attribute?</code></span></span>
<span class="line" db-line="6"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>    &amp; db.xml.lang.attribute?</code></span></span>
<span class="line" db-line="7"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>}</code></span></span>
</pre></div><header><div class="title">Example <span class="label">5<span class="sep">.</span>6<span class="sep">.</span>1<span class="sep">.</span>1</span><span class="sep">. </span>Removing common attributes</div></header></div></section></section><section id="ch05-addelem" class="section"><header><h2><span class="label">5<span class="sep">.</span>7</span><span class="sep">. </span>Adding Elements</h2></header><p><span class="indexterm" id="idx.add.elements-1"></span><span class="indexterm" id="idx.add.elements-2"></span>Adding a new inline or block element is generally a
    straightforward matter of creating a pattern for the new element and using
    <code class="literal">|=</code> to add it to the right pattern, as we did in <a href="#ex-addcleartext" class="xref xref-example">Example <span class="label">5<span class="sep">.</span>4<span class="sep">.</span>2<span class="sep">.</span>1</span>, “Adding cleartext with a customization layer”</a>. But if your new element is more intimately
    related to the existing structure of the document, it may require more
    surgery.</p><p><a href="#ex.addsect6" class="xref xref-example">Example <span class="label">5<span class="sep">.</span>7<span class="sep">.</span>1</span>, “Adding a sect6 element”</a> extends DocBook by adding a
    <code class="literal">sect6</code> element.</p><div id="ex.addsect6" class="example formalobject"><div class="pre-wrap" db-startinglinenumber="1" db-numberoflines="28"><pre class="language-none long numbered programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln"> 1 <span class="nsep">|</span></span><span class="ld"><code>namespace db = "http://docbook.org/ns/docbook"</code></span></span>
<span class="line" db-line="2"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>default namespace = "http://docbook.org/ns/docbook"</code></span></span>
<span class="line" db-line="3"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="4"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>include "docbook.rnc" {</code></span></span>
<span class="line" db-line="5"><span class="ln"> 5 <span class="nsep">|</span></span><span class="ld"><code>   db.sect5.sections = (db.sect6+, db.simplesect*) | db.simplesect+</code></span></span>
<span class="line" db-line="6"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>}</code></span></span>
<span class="line" db-line="7"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="8"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>db.sect6.sections = db.simplesect+</code></span></span>
<span class="line" db-line="9"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="10"><span class="ln">10 <span class="nsep">|</span></span><span class="ld"><code>db.sect6.status.attribute = db.status.attribute</code></span></span>
<span class="line" db-line="11"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>db.sect6.role.attribute = attribute role { text }</code></span></span>
<span class="line" db-line="12"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>db.sect6.attlist =</code></span></span>
<span class="line" db-line="13"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>   db.sect6.role.attribute?</code></span></span>
<span class="line" db-line="14"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> &amp; db.common.attributes</code></span></span>
<span class="line" db-line="15"><span class="ln">15 <span class="nsep">|</span></span><span class="ld"><code> &amp; db.common.linking.attributes</code></span></span>
<span class="line" db-line="16"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> &amp; db.label.attribute?</code></span></span>
<span class="line" db-line="17"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> &amp; db.sect6.status.attribute?</code></span></span>
<span class="line" db-line="18"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="19"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>db.sect6.info = db._info.title.req</code></span></span>
<span class="line" db-line="20"><span class="ln">20 <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="21"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>db.sect6 =</code></span></span>
<span class="line" db-line="22"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>   element sect6 {</code></span></span>
<span class="line" db-line="23"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>      db.sect6.attlist,</code></span></span>
<span class="line" db-line="24"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>      db.sect6.info,</code></span></span>
<span class="line" db-line="25"><span class="ln">25 <span class="nsep">|</span></span><span class="ld"><code>      ((db.all.blocks+, db.sect6.sections?)</code></span></span>
<span class="line" db-line="26"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>       | db.sect6.sections),</code></span></span>
<span class="line" db-line="27"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>      db.navigation.components*</code></span></span>
<span class="line" db-line="28"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>   }</code></span></span>
</pre></div><header><div class="title">Example <span class="label">5<span class="sep">.</span>7<span class="sep">.</span>1</span><span class="sep">. </span>Adding a sect6 element</div></header></div><p>Here we’ve redefined <a href="sect5.html"><code class="tag tag-element">sect5</code></a> to include
    <code class="literal">sect6</code> and provided a pattern for
    <code class="literal">sect6</code>.<span class="indexterm" id="ch05-addelem_para3_indexterm1"></span><span class="indexterm" id="ch05-addelem_para3_indexterm2"></span></p></section><section id="ch05-addattribute" class="section"><header><h2><span class="label">5<span class="sep">.</span>8</span><span class="sep">. </span>Adding Attributes</h2></header><p><span class="indexterm" id="idx.add.attr-1"></span><span class="indexterm" id="idx.add.attr-2"></span>The simplest way to add an attribute to a single element is
    to add it to the attlist pattern for that element. <a href="#ex.addattribute" class="xref xref-example">Example <span class="label">5<span class="sep">.</span>8<span class="sep">.</span>1</span>, “Adding born and died attributes”</a> adds the optional attributes <code class="tag tag-attribute">born</code> and <code class="tag tag-attribute">died</code> to the attribute list for
    <a href="author.html"><code class="tag tag-element">author</code></a>. The <code class="literal">db.author.attlist</code>
    pattern is redefined to interleave the two new optional attributes with
    the existing attributes on the list.</p><div id="ex.addattribute" class="example formalobject"><div class="programlistingco"><div class="pre-wrap" db-startinglinenumber="1" db-numberoflines="8"><pre class="language-none long numbered programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">1 <span class="nsep">|</span></span><span class="ld"><code>namespace db = "http://docbook.org/ns/docbook"</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>default namespace = "http://docbook.org/ns/docbook"</code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="4"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>include "docbook.rnc"</code></span></span>
<span class="line" db-line="5"><span class="ln">5 <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="6"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>db.author.attlist &amp;=                             <a id="exarea-a1" class="callout-bug linecolumn" db-line="6" db-column="50">①</a></code></span></span>
<span class="line" db-line="7"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>  attribute born { db.date.contentmodel }?       <a id="exarea-a2" class="callout-bug linecolumn" db-line="7" db-column="50">②</a></code></span></span>
<span class="line" db-line="8"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>  &amp; attribute died { db.date.contentmodel }?</code></span></span>
</pre></div><div class="calloutlist"><dl><dt id="list_exarea-a1" class="callout"><a class="callout-bug" href="#exarea-a1">①</a></dt><dd><p><code class="literal">&amp;=</code> interleaves the two new optional
          attributes with the existing attributes on the list.</p></dd><dt id="list_exarea-a2" class="callout"><a class="callout-bug" href="#exarea-a2">②</a></dt><dd><p><code class="literal">db.date.contentmodel</code> is a pattern used for
          any attribute or element that represents a date.<span class="indexterm" id="list_exarea-a2_para1_indexterm1"></span><span class="indexterm" id="list_exarea-a2_para1_indexterm2"></span></p></dd></dl></div></div><header><div class="title">Example <span class="label">5<span class="sep">.</span>8<span class="sep">.</span>1</span><span class="sep">. </span>Adding born and died attributes</div></header></div></section><section id="ch05-classrole" class="section"><header><h2><span class="label">5<span class="sep">.</span>9</span><span class="sep">. </span>Other Modifications</h2></header><section id="ch05-classrole_s1" class="section"><header><h3><span class="label">5<span class="sep">.</span>9<span class="sep">.</span>1</span><span class="sep">. </span>Changing the Contents of the role Attribute</h3></header><p><span class="indexterm" id="ch05-classrole_s1_para1_indexterm1"></span>The <code class="tag tag-attribute">role</code> attribute,
      found on almost all of the elements in DocBook, is a text attribute that
      can be used to subclass an element. In some applications, it may be
      useful to modify the definition of <code class="tag tag-attribute">role</code> so that authors must choose one of a
      specific set of possible values.</p><p>In <a href="#ex.changerole" class="xref xref-example">Example <span class="label">5<span class="sep">.</span>9<span class="sep">.</span>1<span class="sep">.</span>1</span>, “Changing role on procedure”</a>, the <code class="tag tag-attribute">role</code> attribute on the
      <a href="procedure.html"><code class="tag tag-element">procedure</code></a> element is constrained to the value
      <code class="literal">required</code> or <code class="literal">optional</code>.</p><div id="ex.changerole" class="example formalobject"><div class="pre-wrap" db-startinglinenumber="1" db-numberoflines="5"><pre class="language-none long numbered programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">1 <span class="nsep">|</span></span><span class="ld"><code>namespace db = "http://docbook.org/ns/docbook"</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>include "docbook.rnc" {</code></span></span>
<span class="line" db-line="4"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>   db.procedure.role.attribute = attribute role { "required" | "optional" }</code></span></span>
<span class="line" db-line="5"><span class="ln">5 <span class="nsep">|</span></span><span class="ld"><code>}</code></span></span>
</pre></div><header><div class="title">Example <span class="label">5<span class="sep">.</span>9<span class="sep">.</span>1<span class="sep">.</span>1</span><span class="sep">. </span>Changing role on procedure</div></header></div></section><section id="ch05-classrole_s2" class="section"><header><h3><span class="label">5<span class="sep">.</span>9<span class="sep">.</span>2</span><span class="sep">. </span>Adding a Value to an Enumerated Attribute</h3></header><p><span class="indexterm" id="ch05-classrole_s2_para1_indexterm1"></span><a href="#ex.addenumeration" class="xref xref-example">Example <span class="label">5<span class="sep">.</span>9<span class="sep">.</span>2<span class="sep">.</span>1</span>, “Adding a value to an enumeration”</a> adds the value
      <q><code class="tag tag-attvalue">large</code></q> to the
      <code class="varname">db.spacing.enumeration</code> pattern. Any attribute that is
      defined using <code class="varname">db.spacing.enumeration</code> will now have
      <code class="tag tag-attvalue">large</code> as a legal value. Note that
      while it is easy to add a value to an enumeration, to remove a value
      from an enumeration you need to redefine the entire enumeration, minus
      the values you don’t need.<span class="indexterm" id="ch05-classrole_s2_para1_indexterm2"></span></p><div id="ex.addenumeration" class="example formalobject"><div class="pre-wrap" db-startinglinenumber="1" db-numberoflines="7"><pre class="language-none long numbered programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">1 <span class="nsep">|</span></span><span class="ld"><code>namespace db = "http://docbook.org/ns/docbook"</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>default namespace = "http://docbook.org/ns/docbook"</code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="4"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>include "docbook.rnc"</code></span></span>
<span class="line" db-line="5"><span class="ln">5 <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="6"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code># add a value to an enumeration</code></span></span>
<span class="line" db-line="7"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>db.spacing.enumeration |= "large"</code></span></span>
</pre></div><header><div class="title">Example <span class="label">5<span class="sep">.</span>9<span class="sep">.</span>2<span class="sep">.</span>1</span><span class="sep">. </span>Adding a value to an enumeration</div></header></div></section></section></div></main><nav class="bottom"><div class="navrow"><div class="navleft"><a title="Chapter  4 .  Publishing DocBook Documents" href="ch04.html"><i class="fas fa-arrow-left"></i></a></div><div class="navmiddle"><a title="DocBook 5.2: The Definitive Guide" href="index.html"><i class="fas fa-home"></i></a></div><div class="navright"><a title="Chapter  6 .  DocBook Assemblies" href="ch06.html"><i class="fas fa-arrow-right"></i></a></div></div><div class="navrow"><div class="navleft navtitle">Chapter  4 .  Publishing DocBook Documents</div><div class="navmiddle"><a title="Part  I .  Introduction" href="part1.html"><i class="fas fa-arrow-up"></i></a></div><div class="navright navtitle">Chapter  6 .  DocBook Assemblies</div></div><div class="infofooter"><span class="copyrightfooter"><a href="dbcpyright.html">Copyright</a> © 2010–2023 Norman Walsh.</span></div><nav class="tocopen"></nav><nav class="toc"></nav><!-- Hide ToC details from user agents that don’t support JS --><script type="text/html" class="tocopen"></script><script type="text/html" class="toc"><header><span>Table of Contents</span><span class="close"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAtklEQVQ4jaWT0Q3DIAxEz52AEbyB2cDZhBEY3SNcPyqqBEwqpZaQAHNP5jBCEiJCPAiSIgAeiUe8zoveO9x9e9jd0XtfKwHA1hpHtNY49rO8u59zn4mqMiJSyFkcEVTVFQCAtdYFMotrrXN111JnyA/xCsggN2JeXmGEmaGU8l2XUmBm29fZuh0RW2PTK2SGZcamADPb3nmGmNkKOI7j1rAzJG2kcWhqkstQ1QX+/2ciKU/FJOUN6JFZYWpmK3sAAAAASUVORK5CYII=" alt="X"/></span><p class="ptoc-search"><input class="ptoc-search" placeholder="Search" style="width: 80%"/></p></header><div db-persistent-toc="persistent-toc.html" db-prefix="">Loading…</div></script></nav><script src="./js/persistent-toc.js"></script><script src="./js/chunk-nav.js"></script><script type="text/javascript" src="js/refentry.js"></script></body></html>